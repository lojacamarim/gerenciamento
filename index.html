<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Camarim - Sistema de Gestão</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    
    <!-- Bibliotecas externas -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.5/purify.min.js"></script>
    
    <!-- Scripts do sistema -->
    <script src="database.js"></script>
    <script src="script.js" defer></script>
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
           <div class="logo">
                <div class="logo-container">
                    <img src="logo-camarim.png" alt="CamarimLogo" class="logo-image">
                    <h1 class="logo-fallback">CAMARIM<span>.</span></h1>
                </div>
                <p class="logo-subtitle">Makeup & Skincare</p>
            </div>
            
            <nav class="nav-menu">
                <a href="#dashboard" class="nav-item active" data-view="dashboard">
                    <i class="fas fa-home"></i> Dashboard
                </a>
                <a href="#products" class="nav-item" data-view="products">
                    <i class="fas fa-boxes"></i> Produtos
                </a>
                <a href="#new-product" class="nav-item" data-view="new-product">
                    <i class="fas fa-plus-circle"></i> Cadastrar
                </a>
                <a href="#sales" class="nav-item" data-view="sales">
                    <i class="fas fa-shopping-cart"></i> Vendas
                </a>
                <a href="#new-sale" class="nav-item" data-view="new-sale">
                    <i class="fas fa-cash-register"></i> Nova Venda
                </a>
                <a href="#reports" class="nav-item" data-view="reports">
                    <i class="fas fa-chart-bar"></i> Relatórios
                </a>
                <!-- Novo item: Nuvem -->
                <a href="#cloud" class="nav-item" data-view="cloud">
                    <i class="fas fa-cloud"></i> Nuvem
                </a>
                <a href="#settings" class="nav-item" data-view="settings">
                    <i class="fas fa-cog"></i> Configurações
                </a>
                <a href="#database" class="nav-item" data-view="database">
                    <i class="fas fa-database"></i> Banco de Dados
                </a>
            </nav>
            
            <div class="quick-actions">
                <a href="#new-sale" class="btn-primary" data-view="new-sale">
                    <i class="fas fa-cash-register"></i> Nova Venda
                </a>
                <a href="#new-product" class="btn-secondary" data-view="new-product">
                    <i class="fas fa-plus"></i> Novo Produto
                </a>
            </div>
        </aside>
        
        <!-- Main Content -->
        <main class="main-content">
            <div class="header">
                <h2 id="page-title">Dashboard</h2>
                <div class="header-actions" id="header-actions">
                    <button class="btn btn-light" id="export-btn">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="btn btn-info" id="import-btn">
                        <i class="fas fa-upload"></i>
                    </button>
                </div>
            </div>
            
            <!-- Views Container -->
            <div id="view-container">
                <!-- Dashboard View -->
                <div id="dashboard-view" class="view">
                    <div class="dashboard-cards">
                        <div class="card card-1">
                            <div class="card-icon">
                                <i class="fas fa-boxes"></i>
                            </div>
                            <h3>Produtos Cadastrados</h3>
                            <div class="card-value" id="total-products">0</div>
                            <div class="card-change positive"></div>
                        </div>
                        
                        <div class="card card-2">
                            <div class="card-icon">
                                <i class="fas fa-shopping-cart"></i>
                            </div>
                            <h3>Vendas Hoje</h3>
                            <div class="card-value" id="today-sales">0</div>
                            <div class="card-change positive"></div>
                        </div>
                        
                        <div class="card card-3">
                            <div class="card-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <h3>Receita Mensal</h3>
                            <div class="card-value">
                                <span class="currency" id="monthly-revenue">0,00</span>
                            </div>
                            <div class="card-change positive"></div>
                        </div>
                        
                        <div class="card card-4">
                            <div class="card-icon">
                                <i class="fas fa-crown"></i>
                            </div>
                            <h3>Produto Mais Vendido</h3>
                            <div class="card-value" id="best-seller">-</div>
                            <div class="card-change">
                                <span id="best-seller-qty">0</span> unidades vendidas
                            </div>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <h3 class="chart-title">Vendas Mensais</h3>
                        <div class="chart-wrapper">
                            <canvas id="monthlySalesChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="table-container">
                        <h3 style="padding: 20px 20px 0;">Vendas Recentes</h3>
                        <table id="recent-sales-table">
                            <thead>
                                <tr>
                                    <th>ID Venda</th>
                                    <th>Data/Hora</th>
                                    <th>Produtos</th>
                                    <th>Total</th>
                                    <th>Atendente</th>
                                    <th>Pagamento</th>
                                </tr>
                            </thead>
                            <tbody id="recent-sales-body"></tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Products View -->
                <div id="products-view" class="view d-none">
                    <div class="mb-20">
                        <div class="alert alert-success d-none" id="product-alert">
                            <i class="fas fa-check-circle"></i>
                            <span id="alert-message"></span>
                        </div>
                    </div>
                    
                    <div class="products-summary" id="inventory-summary"></div>
                    
                    <div class="products-actions">
                        <div class="left-actions">
                            <div class="form-group" style="min-width: 250px;">
                                <input type="text" class="form-control" id="product-search" placeholder="Buscar por nome ou código...">
                            </div>
                            <div class="form-group" style="width: 180px;">
                                <select class="form-control" id="category-filter">
                                    <option value="">Todas Categorias</option>
                                    <option value="Shoes">Sapatos</option>
                                    <option value="Belts">Cintos</option>
                                    <option value="Bags">Bolsas</option>
                                    <option value="Activewear">Roupas Esportivas</option>
                                    <option value="Clothing">Roupas Casuais</option>
                                    <option value="Makeup">Maquiagem</option>
                                    <option value="Skincare">Skincare</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="right-actions">
                            <button class="btn btn-success" id="export-products">
                                <i class="fas fa-file-export"></i> Exportar
                            </button>
                            <button class="btn btn-primary" data-view="new-product">
                                <i class="fas fa-plus"></i> Novo Produto
                            </button>
                        </div>
                    </div>
                    
                    <div class="table-container">
                        <table id="products-table">
                            <thead>
                                <tr>
                                    <th>Código</th>
                                    <th>Nome</th>
                                    <th>Categoria</th>
                                    <th>Custo</th>
                                    <th>CMV</th>
                                    <th>Markup</th>
                                    <th>Sugerido</th>
                                    <th>Preço</th>
                                    <th>Estoque</th>
                                    <th>Total</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="products-body"></tbody>
                        </table>
                    </div>
                </div>
                
                <!-- New Product View -->
                <div id="new-product-view" class="view d-none">
                    <div class="mb-20">
                        <div class="alert alert-success d-none" id="new-product-alert">
                            <i class="fas fa-check-circle"></i>
                            <span id="new-alert-message"></span>
                        </div>
                    </div>
                    
                    <div class="header">
                        <div class="header-actions">
                            <button class="btn btn-light" data-view="products">
                                <i class="fas fa-arrow-left"></i> Voltar
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-container">
                        <form id="product-form">
                            <input type="hidden" id="product-id">
                            <input type="hidden" id="is-edit" value="false">
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="product-name">Nome do Produto *</label>
                                    <input type="text" id="product-name" class="form-control" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="product-category">Categoria *</label>
                                    <select id="product-category" class="form-control" required>
                                        <option value="">Selecione uma categoria</option>
                                        <option value="Shoes">Sapatos</option>
                                        <option value="Belts">Cintos</option>
                                        <option value="Bags">Bolsas</option>
                                        <option value="Activewear">Roupas Esportivas</option>
                                        <option value="Clothing">Roupas Casuais</option>
                                        <option value="Makeup">Maquiagem</option>
                                        <option value="Skincare">Skincare</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="purchase-cost">Custo de Compra (R$) *</label>
                                    <input type="number" id="purchase-cost" class="form-control" step="0.01" min="0" required>
                                    <div class="form-text">Valor pago pelo produto</div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="shipping-cost">Custo de Frete (R$) *</label>
                                    <input type="number" id="shipping-cost" class="form-control" step="0.01" min="0" required>
                                    <div class="form-text">Custo do frete para receber o produto</div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="operational-expenses">Despesas Operacionais Mensais (R$)</label>
                                    <input type="number" id="operational-expenses" class="form-control" step="0.01" min="0" value="4000">
                                    <div class="form-text">Despesas fixas mensais da loja</div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="expected-sales">Volume de Vendas Mensal Esperado *</label>
                                    <input type="number" id="expected-sales" class="form-control" min="1" required value="100">
                                    <div class="form-text">Quantidade esperada de vendas por mês</div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="variable-fees">Taxas Variáveis (%)</label>
                                    <input type="number" id="variable-fees" class="form-control" step="0.1" min="0" value="9.5">
                                    <div class="form-text">Taxas de cartão + comissões (padrão: 9.5%)</div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="taxes">Impostos (%)</label>
                                    <input type="number" id="taxes" class="form-control" step="0.1" min="0" value="6">
                                    <div class="form-text">Impostos sobre a venda (padrão: 6%)</div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="profit-margin">Margem de Lucro Desejada (%)</label>
                                    <input type="number" id="profit-margin" class="form-control" step="0.1" min="0" value="40">
                                    <div class="form-text">Margem de lucro desejada (padrão: 40%)</div>
                                </div>
                            </div>
                            
                            <div class="calculation-box">
                                <h4>Cálculo do Preço Sugerido</h4>
                                
                                <div class="calculation-row">
                                    <span>Custo de Compra:</span>
                                    <span id="calc-purchase-cost" class="currency">0,00</span>
                                </div>
                                
                                <div class="calculation-row">
                                    <span>+ Custo de Frete:</span>
                                    <span id="calc-shipping-cost" class="currency">0,00</span>
                                </div>
                                
                                <div class="calculation-row">
                                    <span>+ Custo Operacional Proporcional:</span>
                                    <span id="calc-operational-cost" class="currency">0,00</span>
                                </div>
                                
                                <div class="calculation-row">
                                    <span><strong>CMV (Custo Mercadoria Vendida):</strong></span>
                                    <span id="calc-cmv" class="currency"><strong>0,00</strong></span>
                                </div>
                                
                                <div class="calculation-row">
                                    <span>Taxas Variáveis:</span>
                                    <span id="calc-variable-fees" class="percentage">0,00</span>
                                </div>
                                
                                <div class="calculation-row">
                                    <span>+ Impostos:</span>
                                    <span id="calc-taxes" class="percentage">0,00</span>
                                </div>
                                
                                <div class="calculation-row">
                                    <span>+ Margem de Lucro:</span>
                                    <span id="calc-profit-margin" class="percentage">0,00</span>
                                </div>
                                
                                <div class="calculation-row">
                                    <span><strong>Markup:</strong></span>
                                    <span id="calc-markup"><strong>0,00</strong></span>
                                </div>
                                
                                <div class="calculation-row total">
                                    <span>PREÇO SUGERIDO:</span>
                                    <span id="calc-suggested-price" class="currency"><strong>0,00</strong></span>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="selling-price">Preço de Venda (R$) *</label>
                                    <input type="number" id="selling-price" class="form-control" step="0.01" min="0" required>
                                    <div class="form-text">Preço real de venda (pode ser ajustado)</div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="initial-stock">Estoque *</label>
                                    <input type="number" id="initial-stock" class="form-control" min="0" required value="10">
                                    <div class="form-text">Quantidade em estoque</div>
                                </div>
                            </div>
                            
                            <div class="text-right mt-20">
                                <button type="button" class="btn btn-light" data-view="products">Cancelar</button>
                                <button type="submit" class="btn btn-success" id="product-form-submit">Salvar Produto</button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <!-- Sales View -->
                <div id="sales-view" class="view d-none">
                    <div class="header">
                        <div class="header-actions">
                            <button class="btn btn-light" id="filter-sales">
                                <i class="fas fa-calendar-alt"></i> Filtrar por Data
                            </button>
                            <button class="btn btn-success" data-view="new-sale">
                                <i class="fas fa-cash-register"></i> Nova Venda
                            </button>
                        </div>
                    </div>
                    
                    <div class="table-container">
                        <table id="sales-table">
                            <thead>
                                <tr>
                                    <th>ID Venda</th>
                                    <th>Data/Hora</th>
                                    <th>Produtos</th>
                                    <th>Quantidade</th>
                                    <th>Total</th>
                                    <th>Atendente</th>
                                    <th>Pagamento</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="sales-body"></tbody>
                        </table>
                    </div>
                </div>
                
                <!-- New Sale View -->
                <div id="new-sale-view" class="view d-none">
                    <div class="header">
                        <div class="header-actions">
                            <button class="btn btn-light" data-view="sales">
                                <i class="fas fa-arrow-left"></i> Voltar
                            </button>
                        </div>
                    </div>
                    
                    <div class="cart-container">
                        <div class="cart-items">
                            <h3 style="margin-bottom: 20px;">Produtos</h3>
                            
                            <div class="form-group mb-20">
                                <input type="text" class="form-control" id="sale-product-search" placeholder="Buscar produto por nome ou código...">
                            </div>
                            
                            <div id="sale-products-list"></div>
                            
                            <div id="sale-cart"></div>
                            
                            <div id="empty-cart-message" class="text-center" style="padding: 40px; color: var(--gray);">
                                <i class="fas fa-shopping-cart fa-3x mb-20"></i>
                                <h4>Carrinho vazio</h4>
                                <p>Adicione produtos usando a busca acima</p>
                            </div>
                        </div>
                        
                        <div class="cart-summary">
                            
                            <h3 style="margin-bottom: 20px;">Resumo da Venda</h3>
                            
                            <div class="form-group" style="margin: 15px 0;">
                                <label for="attendant">Atendente *</label>
                                <select id="attendant" class="form-control" required>
                                    <option value="">Selecione o atendente</option>
                                    <option value="Gabryella">Gabryella</option>
                                    <option value="Guilherme">Guilherme</option>
                                    <option value="Outro">Outro</option>
                                </select>
                            </div>
                            
                            <div class="summary-row">
                                <span>Subtotal:</span>
                                <span id="cart-subtotal" class="currency">0,00</span>
                            </div>
                            
                            <div class="form-group" style="margin: 15px 0;">
                                <label for="sale-discount">Desconto (R$)</label>
                                <input type="number" id="sale-discount" class="form-control" step="0.01" min="0" value="0">
                            </div>
                            
                            <div class="form-group" style="margin: 15px 0;">
                                <label for="payment-method">Método de Pagamento</label>
                                <select id="payment-method" class="form-control">
                                    <option value="cash">Dinheiro</option>
                                    <option value="pix">Pix</option>
                                    <option value="debit">Cartão de Débito</option>
                                    <option value="credit">Cartão de Crédito</option>
                                </select>
                            </div>
                            
                            <div class="form-group d-none" id="card-fee-container" style="margin: 15px 0;">
                                <label for="card-fee">Taxa do Cartão (%)</label>
                                    <input type="number" id="card-fee" class="form-control" step="0.1" min="0" value="3.5">
                                <div class="form-text" id="card-fee-info">Taxa para cartão de débito: 2% | Crédito: 4.5%</div>
                            </div>
                            
                            <div class="summary-row">
                                <span>Desconto:</span>
                                <span id="cart-discount" class="currency">0,00</span>
                            </div>
                            
                            <div class="summary-row d-none" id="cart-fees-row">
                                <span>Taxas:</span>
                                <span id="cart-fees" class="currency">0,00</span>
                            </div>
                            
                            <div class="summary-row total">
                                <span>TOTAL:</span>
                                <span id="cart-total" class="currency">0,00</span>
                            </div>
                            
                            <button class="btn btn-success btn-block" style="margin-top: 20px; padding: 15px;" id="complete-sale">
                                <i class="fas fa-check-circle"></i> Finalizar Venda
                            </button>
                            
                            <button class="btn btn-light btn-block" style="margin-top: 10px;" id="clear-cart">
                                <i class="fas fa-trash"></i> Limpar Carrinho
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Reports View -->
                <div id="reports-view" class="view d-none">
                    <div class="header">
                        <div class="header-actions">
                            <button class="btn btn-success" id="generate-pdf-report">
                                <i class="fas fa-file-pdf"></i> Gerar PDF
                            </button>
                        </div>
                    </div>
                    
                    <div class="dashboard-cards">
                        <div class="card card-1">
                            <div class="card-icon">
                                <i class="fas fa-money-bill-wave"></i>
                            </div>
                            <h3>Receita Total</h3>
                            <div class="card-value">
                                <span class="currency" id="report-revenue">0,00</span>
                            </div>
                            <div class="card-change">Últimos 30 dias</div>
                        </div>
                        
                        <div class="card card-2">
                            <div class="card-icon">
                                <i class="fas fa-calculator"></i>
                            </div>
                            <h3>Custo Total</h3>
                            <div class="card-value">
                                <span class="currency" id="report-cost">0,00</span>
                            </div>
                            <div class="card-change">Últimos 30 dias</div>
                        </div>
                        
                        <div class="card card-3">
                            <div class="card-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <h3>Lucro Líquido</h3>
                            <div class="card-value">
                                <span class="currency" id="report-profit">0,00</span>
                            </div>
                            <div class="card-change positive"></div>
                        </div>
                        
                        <div class="card card-4">
                            <div class="card-icon">
                                <i class="fas fa-box"></i>
                            </div>
                            <h3>Produtos com Baixo Estoque</h3>
                            <div class="card-value" id="low-stock-count">0</div>
                            <div class="card-change">
                                <span id="low-stock-list"></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <h3 class="chart-title">Desempenho por Categoria</h3>
                        <div class="chart-wrapper">
                            <canvas id="categoryChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="table-container">
                        <h3 style="padding: 20px 20px 0;">Top 10 Produtos Mais Vendidos</h3>
                        <table id="top-products-table">
                            <thead>
                                <tr>
                                    <th>Posição</th>
                                    <th>Produto</th>
                                    <th>Categoria</th>
                                    <th>Quantidade Vendida</th>
                                    <th>Receita Gerada</th>
                                    <th>Lucro</th>
                                </tr>
                            </thead>
                            <tbody id="top-products-body"></tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Cloud View -->
                <div id="cloud-view" class="view d-none">
                    <div class="header">
                        <div class="header-actions">
                            <button class="btn btn-light" data-view="dashboard">
                                <i class="fas fa-arrow-left"></i> Voltar
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-container">
                        <h3 style="margin-bottom: 20px;">
                            <i class="fas fa-cloud"></i> Sincronização na Nuvem
                        </h3>
                        
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle"></i>
                            <strong>Como funciona:</strong> Esta funcionalidade permite sincronizar seus dados com o GitHub Gist, criando backups privados e compartilháveis.
                        </div>
                        
                        <div class="dashboard-cards">
                            <div class="card card-1">
                                <div class="card-icon">
                                    <i class="fas fa-key"></i>
                                </div>
                                <h3>Status do Token</h3>
                                <div class="card-value" id="token-status">Não configurado</div>
                                <div class="card-change" id="token-info"></div>
                            </div>
                            
                            <div class="card card-2">
                                <div class="card-icon">
                                    <i class="fas fa-sync"></i>
                                </div>
                                <h3>Última Sincronização</h3>
                                <div class="card-value" id="last-sync">Nunca</div>
                                <div class="card-change" id="sync-info"></div>
                            </div>
                            
                            <div class="card card-3">
                                <div class="card-icon">
                                    <i class="fas fa-database"></i>
                                </div>
                                <h3>Backup</h3>
                                <div class="card-value" id="backup-size">0 KB</div>
                                <div class="card-change" id="backup-info"></div>
                            </div>
                            
                            <div class="card card-4">
                                <div class="card-icon">
                                    <i class="fas fa-link"></i>
                                </div>
                                <h3>Gist Atual</h3>
                                <div class="card-value" id="current-gist">Nenhum</div>
                                <div class="card-change" id="gist-info"></div>
                            </div>
                        </div>
                        
                        <div class="mt-30">
                            <h3 style="margin-bottom: 20px;">Configuração do GitHub</h3>
                            <div class="form-row">
                                <div class="form-group" style="flex: 2;">
                                    <label for="github-token">Token de Acesso GitHub</label>
                                    <input type="password" id="github-token" class="form-control" placeholder="Cole seu token aqui...">
                                    <div class="form-text">
                                        <strong>Como obter o token:</strong>
                                        <ol style="margin-top: 5px; padding-left: 20px;">
                                            <li>Acesse <a href="https://github.com/settings/tokens/new" target="_blank">GitHub Tokens</a></li>
                                            <li>Clique em "Generate new token" → "Generate new token (classic)"</li>
                                            <li>Marque APENAS a opção "gist"</li>
                                            <li>Clique em "Generate token"</li>
                                            <li>Copie o token gerado e cole aqui</li>
                                        </ol>
                                    </div>
                                </div>
                                
                                <div class="form-group" style="flex: 1;">
                                    <label>Ações</label>
                                    <button class="btn btn-success btn-block" id="save-token">
                                        <i class="fas fa-save"></i> Salvar Token
                                    </button>
                                    <button class="btn btn-light btn-block mt-10" id="test-token">
                                        <i class="fas fa-check"></i> Testar Token
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-30">
                            <h3 style="margin-bottom: 20px;">Sincronização</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <button class="btn btn-primary btn-block" id="save-to-cloud">
                                        <i class="fas fa-cloud-upload-alt"></i> Salvar na Nuvem
                                    </button>
                                    <div class="form-text">Cria um backup privado no GitHub Gist</div>
                                </div>
                                
                                <div class="form-group">
                                    <button class="btn btn-success btn-block" id="load-from-cloud">
                                        <i class="fas fa-cloud-download-alt"></i> Carregar da Nuvem
                                    </button>
                                    <div class="form-text">Carrega dados do Gist configurado</div>
                                </div>
                                
                                <div class="form-group">
                                    <button class="btn btn-info btn-block" id="load-from-link">
                                        <i class="fas fa-link"></i> Carregar por Link
                                    </button>
                                    <div class="form-text">Carrega dados de um link de Gist compartilhado</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-30">
                            <h3 style="margin-bottom: 20px;">Configurações Avançadas</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="auto-sync">Sincronização Automática</label>
                                    <select id="auto-sync" class="form-control">
                                        <option value="0">Desativada</option>
                                        <option value="5">A cada 5 minutos</option>
                                        <option value="15">A cada 15 minutos</option>
                                        <option value="30">A cada 30 minutos</option>
                                        <option value="60">A cada 1 hora</option>
                                    </select>
                                    <div class="form-text">Salva automaticamente na nuvem</div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="gist-description">Descrição do Gist</label>
                                    <input type="text" id="gist-description" class="form-control" value="Camarim - Backup do Sistema">
                                    <div class="form-text">Descrição que aparece no GitHub</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="alert alert-success d-none" id="cloud-alert">
                            <i class="fas fa-check-circle"></i>
                            <span id="cloud-alert-message"></span>
                        </div>
                        
                        <div class="alert alert-warning d-none" id="cloud-warning">
                            <i class="fas fa-exclamation-triangle"></i>
                            <span id="cloud-warning-message"></span>
                        </div>
                        
                        <footer style="background-color: #fff; padding: 15px; margin-top: 30px; border-top: 1px solid #dee2e6;">
                            <div style="max-width: 1200px; margin: 0 auto; text-align: center;">
                                <p style="margin: 0; color: #6c757d; font-size: 0.9rem;">
                                    <strong style="color: #FF6B8B;">Camarim</strong>
                                    <span style="font-size: 1.1rem;">&copy;</span> 2025 - Sistema de Gestão desenvolvido por 
                                    <span style="color: #FF6B8B; font-weight: 500;">Guilherme Silva Vanderley</span> - Atualização: 23/12/25
                                </p>
                            </div>
                        </footer>
                    </div>
                </div>
                
                <!-- Settings View -->
                <div id="settings-view" class="view d-none">
                    <div class="header">
                        <button class="btn btn-light" data-view="dashboard">
                            <i class="fas fa-arrow-left"></i> Voltar
                        </button>
                    </div>
                    
                    <div class="form-container">
                        <h3 style="margin-bottom: 20px;">Configurações Padrão</h3>
                        
                        <form id="settings-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="default-debit-fee">Taxa Cartão Débito (%)</label>
                                    <input type="number" id="default-debit-fee" class="form-control" step="0.1" min="0" value="2.0">
                                </div>
                                
                                <div class="form-group">
                                    <label for="default-credit-fee">Taxa Cartão Crédito (%)</label>
                                    <input type="number" id="default-credit-fee" class="form-control" step="0.1" min="0" value="4.5">
                                </div>
                                
                                <div class="form-group">
                                    <label for="default-tax">Imposto Padrão (%)</label>
                                    <input type="number" id="default-tax" class="form-control" step="0.1" min="0" value="6">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="default-margin">Margem de Lucro Padrão (%)</label>
                                    <input type="number" id="default-margin" class="form-control" step="0.1" min="0" value="40">
                                </div>
                                
                                <div class="form-group">
                                    <label for="monthly-expenses">Despesas Operacionais Mensais (R$)</label>
                                    <input type="number" id="monthly-expenses" class="form-control" step="0.01" min="0" value="4000">
                                </div>
                            </div>
                            
                            <h3 style="margin: 30px 0 20px;">Gerenciamento de Dados</h3>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Exportar Dados</label>
                                    <button type="button" class="btn btn-info btn-block" id="export-data-btn">
                                        <i class="fas fa-download"></i> Exportar para JSON
                                    </button>
                                    <div class="form-text">Salve um backup de todos os dados do sistema</div>
                                </div>
                                
                                <div class="form-group">
                                    <label>Importar Dados</label>
                                    <button type="button" class="btn btn-warning btn-block" id="import-data-btn">
                                        <i class="fas fa-upload"></i> Importar de JSON
                                    </button>
                                    <div class="form-text">Restaurar dados a partir de um backup</div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Limpar Dados</label>
                                    <button type="button" class="btn btn-danger btn-block" id="clear-data-btn">
                                        <i class="fas fa-trash"></i> Limpar Todos os Dados
                                    </button>
                                    <div class="form-text">Atenção: Esta ação não pode ser desfeita!</div>
                                </div>
                            </div>
                            
                            <div class="text-right mt-20">
                                <button type="submit" class="btn btn-success">Salvar Configurações</button>
                            </div>

                            <footer style="background-color: #fff; padding: 15px; margin-top: 30px; border-top: 1px solid #dee2e6;">
                                <div style="max-width: 1200px; margin: 0 auto; text-align: center;">
                                    <p style="margin: 0; color: #6c757d; font-size: 0.9rem;">
                                        <strong style="color: #FF6B8B;">Camarim</strong>
                                        <span style="font-size: 1.1rem;">&copy;</span> 2025 - Sistema de Gestão desenvolvido por 
                                        <span style="color: #FF6B8B; font-weight: 500;">Guilherme Silva Vanderley</span> - Atualização: 23/12/25
                                    </p>
                                </div>
                            </footer>
                        </form>
                    </div>
                </div>
                
                <!-- Database View -->
                <div id="database-view" class="view d-none">
                    <div class="header">
                        <div class="header-actions">
                            <button class="btn btn-light" data-view="settings">
                                <i class="fas fa-arrow-left"></i> Voltar
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-container">
                        <div id="db-info-container" class="mb-20"></div>
                        
                        <div class="dashboard-cards">
                            <div class="card card-1">
                                <div class="card-icon">
                                    <i class="fas fa-database"></i>
                                </div>
                                <h3>Status do Banco</h3>
                                <div class="card-value" id="db-status">Carregando...</div>
                                <div class="card-change" id="db-type"></div>
                            </div>
                            
                            <div class="card card-2">
                                <div class="card-icon">
                                    <i class="fas fa-boxes"></i>
                                </div>
                                <h3>Produtos</h3>
                                <div class="card-value" id="db-products">0</div>
                                <div class="card-change">Cadastrados</div>
                            </div>
                            
                            <div class="card card-3">
                                <div class="card-icon">
                                    <i class="fas fa-shopping-cart"></i>
                                </div>
                                <h3>Vendas</h3>
                                <div class="card-value" id="db-sales">0</div>
                                <div class="card-change">Registradas</div>
                            </div>
                            
                            <div class="card card-4">
                                <div class="card-icon">
                                    <i class="fas fa-hdd"></i>
                                </div>
                                <h3>Armazenamento</h3>
                                <div class="card-value" id="db-storage">0 MB</div>
                                <div class="card-change" id="db-usage"></div>
                            </div>
                        </div>

                        <div class="mt-20">
                            <h3>Ações de Migração</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <button class="btn btn-info btn-block" id="force-migration">
                                        <i class="fas fa-sync"></i> Forçar Migração
                                    </button>
                                    <div class="form-text">Migrar dados do localStorage para IndexedDB</div>
                                </div>
                                
                                <div class="form-group">
                                    <button class="btn btn-success btn-block" id="create-backup">
                                        <i class="fas fa-save"></i> Criar Backup
                                    </button>
                                    <div class="form-text">Criar backup manual dos dados</div>
                                </div>
                                
                                <div class="form-group">
                                    <button class="btn btn-warning btn-block" id="export-db">
                                        <i class="fas fa-download"></i> Exportar Dados
                                    </button>
                                    <div class="form-text">Exportar todos os dados para arquivo</div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="backup-file">Importar Dados</label>
                                    <input type="file" id="backup-file" class="form-control" accept=".json">
                                    <button class="btn btn-primary btn-block mt-10" id="import-backup">
                                        <i class="fas fa-upload"></i> Importar Backup
                                    </button>
                                </div>
                                
                                <div class="form-group">
                                    <label for="cleanup-local">Limpeza</label>
                                    <button class="btn btn-danger btn-block" id="cleanup-local">
                                        <i class="fas fa-trash"></i> Limpar localStorage
                                    </button>
                                    <div class="form-text">Remove dados antigos do localStorage</div>
                                </div>
                            </div>
                            
                            <div class="alert alert-success d-none" id="db-alert">
                                <i class="fas fa-check-circle"></i>
                                <span id="db-alert-message"></span>
                            </div>
                        </div>
                        
                        <footer style="background-color: #fff; padding: 15px; margin-top: 30px; border-top: 1px solid #dee2e6;">
                            <div style="max-width: 1200px; margin: 0 auto; text-align: center;">
                                <p style="margin: 0; color: #6c757d; font-size: 0.9rem;">
                                    <strong style="color: #FF6B8B;">Camarim</strong>
                                    <span style="font-size: 1.1rem;">&copy;</span> 2025 - Sistema de Gestão desenvolvido por 
                                    <span style="color: #FF6B8B; font-weight: 500;">Guilherme Silva Vanderley</span> - Atualização: 23/12/25
                                </p>
                            </div>
                        </footer>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Modals -->
    <div class="modal" id="export-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Exportar Dados</h3>
                <button class="modal-close" data-modal="export-modal">&times;</button>
            </div>
            <div class="modal-body">
                <p>Clique no botão abaixo para baixar um arquivo JSON com todos os dados do sistema.</p>
                <div class="form-group mt-20">
                    <label for="export-type">Tipo de Exportação:</label>
                    <select id="export-type" class="form-control">
                        <option value="all">Todos os Dados</option>
                        <option value="products">Apenas Produtos</option>
                        <option value="sales">Apenas Vendas</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-light" data-modal="export-modal">Cancelar</button>
                <button class="btn btn-success" id="confirm-export">Exportar</button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="import-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Importar Dados</h3>
                <button class="modal-close" data-modal="import-modal">&times;</button>
            </div>
            <div class="modal-body">
                <p>Selecione um arquivo JSON para importar dados para o sistema.</p>
                <div class="form-group mt-20">
                    <label for="import-file">Arquivo JSON:</label>
                    <input type="file" id="import-file" class="form-control" accept=".json">
                </div>
                <div class="alert alert-error d-none" id="import-error">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span id="import-error-message"></span>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-light" data-modal="import-modal">Cancelar</button>
                <button class="btn btn-success" id="confirm-import">Importar</button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="delete-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Confirmar Exclusão</h3>
                <button class="modal-close" data-modal="delete-modal">&times;</button>
            </div>
            <div class="modal-body">
                <p id="delete-message">Tem certeza que deseja excluir este item?</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-light" data-modal="delete-modal">Cancelar</button>
                <button class="btn btn-danger" id="confirm-delete">Excluir</button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="sale-details-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Detalhes da Venda</h3>
                <button class="modal-close" data-modal="sale-details-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="sale-details-content"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-light" data-modal="sale-details-modal">Fechar</button>
                <button class="btn btn-success" id="print-receipt">
                    <i class="fas fa-print"></i> Imprimir Recibo
                </button>
            </div>
        </div>
    </div>
    
    <!-- Pix Modal -->
    <div class="modal" id="pix-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Pagamento via Pix</h3>
                <button class="modal-close" data-modal="pix-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="pix-content"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-light" data-modal="pix-modal">Cancelar</button>
                <button class="btn btn-success" id="confirm-pix-payment">
                    <i class="fas fa-check"></i> Confirmar Pagamento
                </button>
            </div>
        </div>
    </div>
    
    <!-- Receipt Modal -->
    <div class="modal" id="receipt-modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>Recibo de Venda</h3>
                <button class="modal-close" data-modal="receipt-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="receipt-content"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-light" data-modal="receipt-modal">Fechar</button>
                <button class="btn btn-success" id="print-receipt-btn">
                    <i class="fas fa-print"></i> Imprimir Recibo
                </button>
            </div>
        </div>
    </div>
    
    <!-- Report PDF Modal -->
    <div class="modal" id="pdf-report-modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>Gerar Relatório em PDF</h3>
                <button class="modal-close" data-modal="pdf-report-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-container">
                    <form id="pdf-report-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="report-type">Tipo de Relatório</label>
                                <select id="report-type" class="form-control" required>
                                    <option value="sales">Relatório de Vendas</option>
                                    <option value="products">Relatório de Produtos</option>
                                    <option value="financial">Relatório Financeiro</option>
                                    <option value="inventory">Relatório de Estoque</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="report-period">Período</label>
                                <select id="report-period" class="form-control" required>
                                    <option value="today">Hoje</option>
                                    <option value="yesterday">Ontem</option>
                                    <option value="last7">Últimos 7 dias</option>
                                    <option value="last30" selected>Últimos 30 dias</option>
                                    <option value="thisMonth">Este Mês</option>
                                    <option value="lastMonth">Mês Anterior</option>
                                    <option value="thisYear">Este Ano</option>
                                    <option value="custom">Personalizado</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row d-none" id="custom-date-range">
                            <div class="form-group">
                                <label for="start-date">Data Inicial</label>
                                <input type="date" id="start-date" class="form-control">
                            </div>
                            
                            <div class="form-group">
                                <label for="end-date">Data Final</label>
                                <input type="date" id="end-date" class="form-control">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="report-title">Título do Relatório</label>
                                <input type="text" id="report-title" class="form-control" placeholder="Ex: Relatório de Vendas - Janeiro 2024">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="include-charts">Incluir Gráficos</label>
                                <select id="include-charts" class="form-control">
                                    <option value="yes">Sim</option>
                                    <option value="no">Não</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="include-tables">Incluir Tabelas</label>
                                <select id="include-tables" class="form-control">
                                    <option value="yes">Sim</option>
                                    <option value="no">Não</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="report-format">Formato</label>
                                <select id="report-format" class="form-control">
                                    <option value="A4">A4 (Padrão)</option>
                                    <option value="A3">A3</option>
                                    <option value="letter">Carta</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="report-orientation">Orientação</label>
                                <select id="report-orientation" class="form-control">
                                    <option value="portrait">Retrato</option>
                                    <option value="landscape">Paisagem</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="alert alert-success d-none" id="pdf-report-alert">
                            <i class="fas fa-check-circle"></i>
                            <span id="pdf-report-message"></span>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-light" data-modal="pdf-report-modal">Cancelar</button>
                <button class="btn btn-success" id="generate-pdf-btn">
                    <i class="fas fa-file-pdf"></i> Gerar PDF
                </button>
            </div>
        </div>
    </div>
    
    <!-- Edit Sale Modal -->
    <div class="modal" id="edit-sale-modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>Editar Venda</h3>
                <button class="modal-close" data-modal="edit-sale-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="edit-sale-content">
                    <div class="cart-container">
                        <div class="cart-items">
                            <h3 style="margin-bottom: 20px;">Produtos</h3>
                            
                            <div class="form-group mb-20">
                                <input type="text" class="form-control" id="edit-sale-product-search" placeholder="Buscar produto por nome ou código...">
                            </div>
                            
                            <div id="edit-sale-products-list"></div>
                            
                            <div id="edit-sale-cart"></div>
                            
                            <div id="edit-empty-cart-message" class="text-center" style="padding: 40px; color: var(--gray);">
                                <i class="fas fa-shopping-cart fa-3x mb-20"></i>
                                <h4>Carrinho vazio</h4>
                                <p>Adicione produtos usando a busca acima</p>
                            </div>
                        </div>
                        
                        <div class="cart-summary">
                            <h3 style="margin-bottom: 20px;">Resumo da Venda</h3>
                            
                            <div class="form-group" style="margin: 15px 0;">
                                <label for="edit-attendant">Atendente *</label>
                                <select id="edit-attendant" class="form-control" required>
                                    <option value="">Selecione o atendente</option>
                                    <option value="Gabryella">Gabryella</option>
                                    <option value="Guilherme">Guilherme</option>
                                    <option value="Outro">Outro</option>
                                </select>
                            </div>
                            
                            <div class="summary-row">
                                <span>Subtotal:</span>
                                <span id="edit-cart-subtotal" class="currency">0,00</span>
                            </div>
                            
                            <div class="form-group" style="margin: 15px 0;">
                                <label for="edit-sale-discount">Desconto (R$)</label>
                                <input type="number" id="edit-sale-discount" class="form-control" step="0.01" min="0" value="0">
                            </div>
                            
                            <div class="form-group" style="margin: 15px 0;">
                                <label for="edit-payment-method">Método de Pagamento</label>
                                <select id="edit-payment-method" class="form-control">
                                    <option value="cash">Dinheiro</option>
                                    <option value="pix">Pix</option>
                                    <option value="debit">Cartão de Débito</option>
                                    <option value="credit">Cartão de Crédito</option>
                                </select>
                            </div>
                            
                            <div class="form-group d-none" id="edit-card-fee-container" style="margin: 15px 0;">
                                <label for="edit-card-fee">Taxa do Cartão (%)</label>
                                <input type="number" id="edit-card-fee" class="form-control" step="0.1" min="0" value="3.5">
                                <div class="form-text" id="edit-card-fee-info">Taxa para cartão de débito: 2% | Crédito: 4.5%</div>
                            </div>
                            
                            <div class="summary-row">
                                <span>Desconto:</span>
                                <span id="edit-cart-discount" class="currency">0,00</span>
                            </div>
                            
                            <div class="summary-row d-none" id="edit-cart-fees-row">
                                <span>Taxas:</span>
                                <span id="edit-cart-fees" class="currency">0,00</span>
                            </div>
                            
                            <div class="summary-row total">
                                <span>TOTAL:</span>
                                <span id="edit-cart-total" class="currency">0,00</span>
                            </div>
                            
                            <div class="alert alert-warning mt-20">
                                <i class="fas fa-exclamation-triangle"></i>
                                <span>Ao salvar as alterações, o estoque será ajustado automaticamente.</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-light" data-modal="edit-sale-modal">Cancelar</button>
                <button class="btn btn-success" id="save-edited-sale">
                    <i class="fas fa-save"></i> Salvar Alterações
                </button>
            </div>
        </div>
    </div>
    
    <!-- Cloud Modals -->
    <div class="modal" id="github-config-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fab fa-github"></i> Configurar GitHub</h3>
                <button class="modal-close" data-modal="github-config-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-container">
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle"></i>
                        <strong>Primeira Configuração:</strong>
                        <ol style="margin-top: 5px; padding-left: 20px;">
                            <li>Crie um token em: <a href="https://github.com/settings/tokens/new" target="_blank">GitHub Tokens</a></li>
                            <li>Clique em "Generate new token" → "Generate new token (classic)"</li>
                            <li>Marque APENAS a opção <strong>"gist"</strong></li>
                            <li>Clique em "Generate token"</li>
                            <li>Copie o token gerado</li>
                            <li>Cole abaixo e clique em "Salvar"</li>
                        </ol>
                    </div>
                    
                    <div class="form-group mt-20">
                        <label for="config-github-token">Token de Acesso</label>
                        <input type="password" id="config-github-token" class="form-control" placeholder="Cole seu token aqui...">
                        <div class="form-text">O token será salvo localmente no seu navegador</div>
                    </div>
                    
                    <div class="form-group mt-20">
                        <label for="gist-name">Nome do Gist</label>
                        <input type="text" id="gist-name" class="form-control" value="camarim-backup" placeholder="nome-do-gist">
                        <div class="form-text">Nome único para identificar seu backup</div>
                    </div>
                    
                    <div class="alert alert-success d-none" id="github-config-alert">
                        <i class="fas fa-check-circle"></i>
                        <span id="github-config-message"></span>
                    </div>
                    
                    <div class="alert alert-error d-none" id="github-config-error">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span id="github-config-error-message"></span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-light" data-modal="github-config-modal">Cancelar</button>
                <button class="btn btn-success" id="save-github-config">
                    <i class="fas fa-save"></i> Salvar Configuração
                </button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="save-cloud-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-cloud-upload-alt"></i> Salvar na Nuvem</h3>
                <button class="modal-close" data-modal="save-cloud-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-container">
                    <p>Deseja salvar um backup dos dados no GitHub Gist?</p>
                    
                    <div class="form-group mt-20">
                        <label for="cloud-description">Descrição do Backup</label>
                        <input type="text" id="cloud-description" class="form-control" value="Backup Camarim - {data}" placeholder="Descreva este backup...">
                    </div>
                    
                    <div class="form-group mt-20">
                        <label for="cloud-public">Visibilidade</label>
                        <select id="cloud-public" class="form-control">
                            <option value="false">Privado (recomendado)</option>
                            <option value="true">Público (qualquer um com o link pode ver)</option>
                        </select>
                        <div class="form-text">Backups privados só você pode ver</div>
                    </div>
                    
                    <div class="alert alert-info mt-20">
                        <i class="fas fa-info-circle"></i>
                        <strong>Após salvar:</strong> Copie o link do Gist e compartilhe com seu colega para sincronização.
                    </div>
                    
                    <div id="cloud-progress" class="d-none mt-20">
                        <div class="progress">
                            <div class="progress-bar" id="cloud-progress-bar" style="width: 0%"></div>
                        </div>
                        <div class="text-center mt-10" id="cloud-progress-text">Preparando backup...</div>
                    </div>
                    
                    <div id="cloud-result" class="d-none mt-20">
                        <div class="alert alert-success">
                            <i class="fas fa-check-circle"></i>
                            <strong>Backup salvo com sucesso!</strong>
                        </div>
                        
                        <div class="form-group">
                            <label>Link do Gist</label>
                            <div class="input-group">
                                <input type="text" id="gist-link" class="form-control" readonly>
                                <button class="btn btn-light" id="copy-gist-link">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>URL para Compartilhar</label>
                            <div class="alert alert-light">
                                <code id="share-url"></code>
                            </div>
                            <div class="form-text">Compartilhe este link com seu colega</div>
                        </div>
                    </div>
                    
                    <div class="alert alert-error d-none" id="cloud-error">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span id="cloud-error-message"></span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-light" data-modal="save-cloud-modal" id="close-save-cloud">Fechar</button>
                <button class="btn btn-success" id="confirm-save-cloud">
                    <i class="fas fa-cloud-upload-alt"></i> Salvar na Nuvem
                </button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="load-cloud-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-cloud-download-alt"></i> Carregar da Nuvem</h3>
                <button class="modal-close" data-modal="load-cloud-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-container">
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle"></i>
                        <strong>Atenção:</strong> Carregar dados da nuvem substituirá todos os dados atuais do sistema.
                    </div>
                    
                    <div class="form-group mt-20">
                        <label>Método de Carregamento</label>
                        <div class="radio-group">
                            <label class="radio-label">
                                <input type="radio" name="load-method" value="current" checked>
                                <span>Usar Gist Configurado</span>
                                <div class="radio-description">Carrega do Gist já configurado no sistema</div>
                            </label>
                            
                            <label class="radio-label mt-10">
                                <input type="radio" name="load-method" value="link">
                                <span>Usar Link Compartilhado</span>
                                <div class="radio-description">Cole um link de Gist compartilhado</div>
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group mt-20 d-none" id="load-link-container">
                        <label for="gist-url">URL do Gist</label>
                        <input type="text" id="gist-url" class="form-control" placeholder="https://gist.github.com/usuario/id-do-gist">
                        <div class="form-text">Cole o link compartilhado pelo seu colega</div>
                    </div>
                    
                    <div id="load-cloud-progress" class="d-none mt-20">
                        <div class="progress">
                            <div class="progress-bar" id="load-cloud-progress-bar" style="width: 0%"></div>
                        </div>
                        <div class="text-center mt-10" id="load-cloud-progress-text">Conectando ao GitHub...</div>
                    </div>
                    
                    <div id="load-cloud-preview" class="d-none mt-20">
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle"></i>
                            <strong>Dados encontrados:</strong>
                        </div>
                        
                        <div class="preview-container">
                            <div class="preview-row">
                                <span>Produtos:</span>
                                <span id="preview-products">0</span>
                            </div>
                            <div class="preview-row">
                                <span>Vendas:</span>
                                <span id="preview-sales">0</span>
                            </div>
                            <div class="preview-row">
                                <span>Data do Backup:</span>
                                <span id="preview-date">-</span>
                            </div>
                            <div class="preview-row">
                                <span>Descrição:</span>
                                <span id="preview-description">-</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="alert alert-success d-none" id="load-cloud-success">
                        <i class="fas fa-check-circle"></i>
                        <span id="load-cloud-success-message"></span>
                    </div>
                    
                    <div class="alert alert-error d-none" id="load-cloud-error">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span id="load-cloud-error-message"></span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-light" data-modal="load-cloud-modal">Cancelar</button>
                <button class="btn btn-primary" id="check-cloud-data">
                    <i class="fas fa-search"></i> Verificar Dados
                </button>
                <button class="btn btn-success d-none" id="confirm-load-cloud">
                    <i class="fas fa-cloud-download-alt"></i> Carregar Dados
                </button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="auto-sync-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-sync-alt"></i> Sincronização Automática</h3>
                <button class="modal-close" data-modal="auto-sync-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-container">
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle"></i>
                        <strong>Como funciona:</strong> O sistema salvará automaticamente na nuvem a cada período configurado.
                    </div>
                    
                    <div class="form-group mt-20">
                        <label for="auto-sync-interval">Intervalo de Sincronização</label>
                        <select id="auto-sync-interval" class="form-control">
                            <option value="0">Desativado</option>
                            <option value="5">A cada 5 minutos</option>
                            <option value="15">A cada 15 minutos</option>
                            <option value="30">A cada 30 minutos</option>
                            <option value="60">A cada 1 hora</option>
                            <option value="1440">A cada 24 horas</option>
                        </select>
                        <div class="form-text">Tempo entre sincronizações automáticas</div>
                    </div>
                    
                    <div class="form-group mt-20">
                        <label for="auto-sync-actions">Ações Automáticas</label>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="sync-on-save" checked>
                                <span>Sincronizar ao salvar alterações</span>
                                <div class="checkbox-description">Salva na nuvem quando produtos ou vendas são alterados</div>
                            </label>
                            
                            <label class="checkbox-label mt-10">
                                <input type="checkbox" id="sync-on-close">
                                <span>Sincronizar ao fechar o sistema</span>
                                <div class="checkbox-description">Faz um backup final quando a aba é fechada</div>
                            </label>
                            
                            <label class="checkbox-label mt-10">
                                <input type="checkbox" id="notify-sync">
                                <span>Notificar sobre sincronizações</span>
                                <div class="checkbox-description">Mostra notificação quando sincroniza</div>
                            </label>
                        </div>
                    </div>
                    
                    <div class="mt-20">
                        <h4>Status da Sincronização</h4>
                        <div class="status-container">
                            <div class="status-row">
                                <span>Próxima Sincronização:</span>
                                <span id="next-sync-time">-</span>
                            </div>
                            <div class="status-row">
                                <span>Última Sincronização:</span>
                                <span id="last-auto-sync">Nunca</span>
                            </div>
                            <div class="status-row">
                                <span>Sincronizações Hoje:</span>
                                <span id="syncs-today">0</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="alert alert-success d-none" id="auto-sync-alert">
                        <i class="fas fa-check-circle"></i>
                        <span id="auto-sync-message"></span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-light" data-modal="auto-sync-modal">Cancelar</button>
                <button class="btn btn-success" id="save-auto-sync">
                    <i class="fas fa-save"></i> Salvar Configurações
                </button>
            </div>
        </div>
    </div>
    

    <!-- Debug Cloud (remover depois) -->
<div style="position: fixed; bottom: 10px; right: 10px; z-index: 9999;">
    <button onclick="testCloud()" style="background: #ff6b8b; color: white; border: none; padding: 10px; border-radius: 5px;">
        Testar Cloud
    </button>
</div>

<script>
function testCloud() {
    console.log('=== TESTE CLOUD ===');
    console.log('URL atual:', window.location.href);
    console.log('Token salvo:', CloudManager.getToken() ? 'Sim' : 'Não');
    console.log('Gist ID:', CloudManager.getGistId() || 'Nenhum');
    
    // Testar token
    if (CloudManager.getToken()) {
        CloudManager.testToken().then(result => {
            console.log('Teste token:', result);
            alert(result.valid ? 'Token OK!' : 'Token inválido');
        });
    } else {
        alert('Configure um token primeiro na aba Nuvem');
    }
}
</script>

    <script src="cloud.js" defer></script>
    <input type="file" id="file-input" style="display: none;" accept=".json">
</body>
</html>
